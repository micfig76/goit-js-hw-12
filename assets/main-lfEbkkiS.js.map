{"version":3,"file":"main-lfEbkkiS.js","sources":["../../src/js/togglableelement.js","../../src/js/api.js","../../src/js/gallery.js","../../src/main.js"],"sourcesContent":["export class TogglableElement {\n  #element;\n\n  constructor(selector) {\n    this.#element = document.querySelector(selector);\n  }\n\n  getElement() {\n    return this.#element;\n  }\n\n  show() {\n    this.#element.classList.remove('hidden');\n  }\n\n  hide() {\n    this.#element.classList.add('hidden');\n  }\n}\n","const myApiKey = '35720970-632b5595f4a574f3205602e3c';\n\nexport const getPhotos = async searchQuery => {\n  const params = new URLSearchParams({\n    key: myApiKey,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/`, {\n    params,\n  });\n  return response.data;\n};\n","import { getPhotos } from './api';\n\n// const gallery = new Gallery('.gallery', lightbox, loader, loadMoreButton);\nexport class Gallery {\n  #element;\n  #lightbox;\n  #loader;\n  #loadMoreButton;\n\n  constructor(selector, lightbox, loader, loadMoreButton) {\n    this.#element = document.querySelector(selector);\n    this.#lightbox = lightbox;\n    this.#loader = loader;\n    this.#loadMoreButton = loadMoreButton;\n  }\n\n  async loadPhotos(searchQuery) {\n    this.#loader.show();\n    const data = await getPhotos(searchQuery);\n    console.log(data);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search. Please try again later',\n        position: 'topRight',\n      });\n      this.#element.replaceChildren();\n      return;\n    }\n\n    const cards = data.hits\n      .map(toGalleryPhoto)\n      .map(createCard)\n      .map(card => applyLightbox(card, this.#lightbox));\n\n    this.#element.replaceChildren(...cards);\n    this.#lightbox.refresh();\n\n    this.#loader.hide();\n  }\n}\nconst toGalleryPhoto = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n});\n\nconst createCard = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  const template = document.querySelector('template#card-template');\n  const card = document.importNode(template.content, true);\n\n  const lightboxLink = card.querySelector('a#lightbox-link');\n  lightboxLink.href = largeImageURL;\n\n  const img = card.querySelector('img.card-img');\n  img.src = webformatURL;\n  img.alt = tags;\n  img.title = tags;\n\n  card.querySelector(\n    'span.card-stats-item-count[data-item=\"likes\"]'\n  ).textContent = likes;\n\n  card.querySelector(\n    'span.card-stats-item-count[data-item=\"views\"]'\n  ).textContent = views;\n\n  card.querySelector(\n    'span.card-stats-item-count[data-item=\"comments\"]'\n  ).textContent = comments;\n\n  card.querySelector(\n    'span.card-stats-item-count[data-item=\"downloads\"]'\n  ).textContent = downloads;\n\n  return card;\n};\n\nfunction applyLightbox(card, lightbox) {\n  card.querySelector('a#lightbox-link').addEventListener('click', event => {\n    event.preventDefault();\n\n    const closeModalOnEscape = event => {\n      if (event.key === 'Escape') {\n        document.removeEventListener('keydown', closeModalOnEscape);\n        lightbox.close();\n      }\n    };\n\n    document.addEventListener('keydown', closeModalOnEscape);\n\n    lightbox.open(event.currentTarget);\n  });\n\n  return card;\n}\n","import { TogglableElement } from './js/togglableelement.js';\nimport { Gallery } from './js/gallery.js';\n\nconst main = () => {\n  const lightbox = new SimpleLightbox('.gallery #lightbox-link');\n  const loader = new TogglableElement('div.loader');\n  const loadMoreButton = new TogglableElement('button[type=\"button\"].btn');\n\n  const gallery = new Gallery('.gallery', lightbox, loader, loadMoreButton);\n  let query;\n\n  document\n    .querySelector('form#image-search')\n    .addEventListener('submit', async event => {\n      event.preventDefault();\n      const form = event.target;\n      const searchQuery = form.elements['query'].value;\n      form.reset();\n\n      query = searchQuery;\n      await gallery.loadPhotos(searchQuery);\n    });\n\n  loadMoreButton\n    .getElement()\n    .addEventListener('click', () => gallery.loadPhotos(query));\n};\n\nmain();\n"],"names":["TogglableElement","selector","__privateAdd","_element","__privateSet","__privateGet","myApiKey","getPhotos","searchQuery","params","Gallery","lightbox","loader","loadMoreButton","_lightbox","_loader","_loadMoreButton","data","cards","toGalleryPhoto","createCard","card","applyLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","template","lightboxLink","img","event","closeModalOnEscape","main","gallery","query","form"],"mappings":"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"}