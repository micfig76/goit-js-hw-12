var S=o=>{throw TypeError(o)};var w=(o,e,t)=>e.has(o)||S("Cannot "+t);var i=(o,e,t)=>(w(o,e,"read from private field"),t?t.call(o):e.get(o)),l=(o,e,t)=>e.has(o)?S("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),d=(o,e,t,s)=>(w(o,e,"write to private field"),s?s.call(o,t):e.set(o,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();var h;class q{constructor(e){l(this,h);d(this,h,document.querySelector(e))}getElement(){return i(this,h)}show(){i(this,h).classList.remove("hidden")}hide(){i(this,h).classList.add("hidden")}}h=new WeakMap;const P="35720970-632b5595f4a574f3205602e3c",v=async(o,e=1)=>{const t=new URLSearchParams({key:P,q:o,image_type:"photo",orientation:"horizontal",safesearch:!0,page:e,per_page:40});return(await axios.get("https://pixabay.com/api/",{params:t})).data};var p,y,u,g,m;class x{constructor(e,t,s,r){l(this,p);l(this,y);l(this,u);l(this,g);l(this,m,[]);d(this,p,document.querySelector(e)),d(this,y,t),d(this,u,s),d(this,g,r)}async loadPhotos(e,t){t===1&&d(this,m,[]),i(this,g).hide(),i(this,u).show();try{const s=await v(e,t);if(s.hits.length===0){iziToast.error({message:"Sorry, there are no images matching your search. Please try again later",position:"topRight"}),i(this,p).replaceChildren();return}i(this,m).push(...s.hits);const r=i(this,m).map(E).map(C).map(a=>O(a,i(this,y)));i(this,p).replaceChildren(...r),i(this,y).refresh(),i(this,u).hide(),i(this,m).length<s.totalHits?i(this,g).show():iziToast.info({message:"Sorry, there are no images matching your search. Please try again later",position:"topRight"})}catch{iziToast.error({message:"Sorry, couldn`t load images. Please try again later",position:"topRight"})}finally{i(this,u).hide()}}}p=new WeakMap,y=new WeakMap,u=new WeakMap,g=new WeakMap,m=new WeakMap;const E=({webformatURL:o,largeImageURL:e,tags:t,likes:s,views:r,comments:n,downloads:a})=>({webformatURL:o,largeImageURL:e,tags:t,likes:s,views:r,comments:n,downloads:a}),C=({webformatURL:o,largeImageURL:e,tags:t,likes:s,views:r,comments:n,downloads:a})=>{const f=document.querySelector("template#card-template"),c=document.importNode(f.content,!0),L=c.querySelector("a#lightbox-link");L.href=e;const b=c.querySelector("img.card-img");return b.src=o,b.alt=t,b.title=t,c.querySelector('span.card-stats-item-count[data-item="likes"]').textContent=s,c.querySelector('span.card-stats-item-count[data-item="views"]').textContent=r,c.querySelector('span.card-stats-item-count[data-item="comments"]').textContent=n,c.querySelector('span.card-stats-item-count[data-item="downloads"]').textContent=a,c};function O(o,e){return o.querySelector("a#lightbox-link").addEventListener("click",t=>{t.preventDefault();const s=r=>{r.key==="Escape"&&(document.removeEventListener("keydown",s),e.close())};document.addEventListener("keydown",s),e.open(t.currentTarget)}),o}const k=()=>{const o=new SimpleLightbox(".gallery #lightbox-link"),e=new q("div.loader"),t=new q('button[type="button"].btn'),s=new x(".gallery",o,e,t);let r,n=1;document.querySelector("form#image-search").addEventListener("submit",async a=>{a.preventDefault();const f=a.target,c=f.elements.query.value;f.reset(),r=c,n=1,await s.loadPhotos(c,n)}),t.getElement().addEventListener("click",async()=>{n++,await s.loadPhotos(r,n);const a=document.querySelector(".card").getBoundingClientRect().height;scrollBy(0,2*a,{behavior:"smooth"})})};k();
//# sourceMappingURL=main-CHIxB8KO.js.map
